/*!
 * template.js - v2.0.0  @hexson 2017
 */
!function(e){"use strict";var t=function(e,n){if(u.hasOwnProperty(e))return u[e](n);var r=document.getElementById(e).innerHTML;return u[e]=t.render(r),u[e](n)};t.version="2.0.0",t.startTag="{{",t.endTag="}}";var n=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},r=t.trim=function(e){return String(e).replace(/^\s+/,"").replace(/\s+$/,"")},a=t.each=function(e,t){var r;if(n(e))for(r=0;r<e.length;r++)t.call(e,e[r],r,e);else for(r in e)t.call(e,e[r],r)},c={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},i=(t.escapeHTML=function(e){return String(e).replace(/&(?![\w#]+;)|[<'">]/g,function(e){return c[e]})},t.filter=function(e,t){i[e]=t}),u=t.cache={};t.render=function(e){function n(e){return c("'"+e.replace(/('|\\)/g,"\\$1")+"'")}function c(e){return"$out.push("+e.replace(/\n/g,"").replace(/\r/g,"")+");"}function i(e,t,n){e=e.match(/['"]?[$_a-zA-Z][$_a-zA-Z0-9]*['"]?/g),t?a(e||[],function(e){/^[$_a-zA-Z]/.test(e)&&(f[e]="template."+(n?n+".":"")+e.replace("$","")+",")}):a(e||[],function(e){/^[$_a-zA-Z]/.test(e)&&(f[e]="$data."+e+",")})}function u(e){if(e=r(e),!/^\/?(if|else|each)$|^\/?(if|else|each)[^\S]\s*.*$/.test(e)){if(/^.*\|.*/.test(e)){e=e.split("|");var t=/\s*[$_a-zA-Z0-9]+\s*:?/,n=e[1]?"$"+r(e[1].match(t)[0].replace(":","")):"",u=e[1]?e[1].replace(t,""):"";return u=u?u.split(","):[],i(n,!0,"filter"),a(u,function(e){i(e)}),c(n+"("+e[0]+(u.length?","+u.join(","):"")+")")}return i(e),c(e)}var l=e.match(/\/?(if|else|each)/)[0];switch(l){case"if":return e=e.replace(l,""),i(e),l+"("+e+"){";case"else":var o=e.match(/^else\s+if/);return e=o?e.replace(o[0],""):"",i(e),"}"+(o?o[0]+"("+e+"){":l+"{");case"each":var f=r(e.replace(l,"")).split(/\s+/),s=f[3];s&&(f[3]=f[2],f[2]=s);var p="as"===f[1]?l+"("+f[0]+",function("+f.splice(2)+"){":l+"("+f[0]+",function($value,$index,$obj){";return i(f[0]),"$"+p;case"/if":case"/else":return"}";case"/each":return"});";default:return""}}var l=t.startTag,o=t.endTag,f=(new RegExp(l+"([^"+o+"]+)?"+o,"g"),{$each:"template.each,"}),s="$out=[];";e=e.replace(/<!--.*-->/g,""),a(e.split(l),function(e){e=e.split(o);var t=e[0],r=e[1];1===e.length?s+=n(t):(s+=u(t),s+=r?n(r):"")}),s+='return $out.join("")';var p="var ";a(f,function(e,t){p+=t+"="+e});var $=p+s;return new Function("$data",$)};"function"==typeof define?define(function(){return t}):"undefined"!=typeof module&&(module.exports=t),e.template=t}(window||global);